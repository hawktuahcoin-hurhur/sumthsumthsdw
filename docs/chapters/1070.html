<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 1070 Dysfunctional Citadel - Shadow Slave</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <nav>
            <a href="../index.html" class="logo">ğŸ“– Shadow Slave</a>
            <div class="nav-links">
                <a href="../chapter-list.html">ğŸ“š Chapters</a>
                <a href="../login.html">ğŸ’¾ Save</a>
                <a href="https://www.webnovel.com/book/shadow-slave_17505878106372705" target="_blank" rel="noopener">ğŸ”— Official Webnovel</a>
                <div id="auth-container" style="display: flex; align-items: center; gap: 0.5rem;">
                    <button id="login-btn" class="btn btn-sm" style="background: var(--secondary);" onclick="handleLogin()">Sign In</button>
                    <button id="profile-btn" class="btn btn-sm" style="background: var(--primary); display: none;" onclick="showProfile()">ğŸ‘¤ Profile</button>
                    <button id="logout-btn" class="btn btn-sm" style="background: var(--accent); display: none;" onclick="handleLogout()">Sign Out</button>
                </div>
            </div>
        </nav>
    </header>
    <main class="with-sidebar">
        
    <div class="chapter-container">
        <div class="chapter-header">
            <h1>Chapter 1070 Dysfunctional Citadel</h1>
            <div class="chapter-meta">
                Chapter 1070 of 2720 â€¢ 1,057 words â€¢ 4 min read
            </div>
            <div class="tts-controls" data-tts>
                <button class="tts-btn tts-play" type="button">ğŸ”Š Play</button>
                <button class="tts-btn tts-pause" type="button">â¸ Pause</button>
                <button class="tts-btn tts-resume" type="button">â–¶ Resume</button>
                <button class="tts-btn tts-stop" type="button">â¹ Stop</button>
                <span class="tts-rate-label">Speed
                    <select class="tts-rate">
                        <option value="0.85">0.85Ã—</option>
                        <option value="1" selected>1Ã—</option>
                        <option value="1.15">1.15Ã—</option>
                        <option value="1.3">1.3Ã—</option>
                    </select>
                </span>
                <span class="tts-unsupported" style="display:none;">(TTS not supported in this browser)</span>
            </div>
        </div>
        
        <div class="chapter-content" data-chapter="1070">
            <p class="chapter-paragraph">As they went back up the stairs, Sunny couldn't help but think about what he had seen in the stone chamber at the root of the great pagoda. The circle of runes, the sublime crystal hovering in the middle of it... that had to be the core of Hope's tower, as well as of the whole island. The very heart of the Citadel.</p>
<p class="chapter-paragraph">But what was its purpose?</p>
<p class="chapter-paragraph">An easy conclusion would be that the divine soul shard was the energy source that powered the enchantments keeping the Ivory Island afloat. But that did not make any sense... the runes had been carved by the Demon of Desire herself, which meant that the enchantments had been created before her kingdom was destroyed.</p>
<p class="chapter-paragraph">Back then, it had been simply a prospering land. There had been no islands, let alone flying ones. Come to think of it, Sunny was not entirely clear on how the Kingdom of Hope had become the Chained Isles... had she suspended the remnants of her shattered kingdom above the devouring flames herself, in order to preserve at least some of it, or had it been arranged by Sun God?</p>
<p class="chapter-paragraph">There were other questions, too. If the divine soul shard was the heart of the Citadel, was it powering the Gateway? But the Gateway was only created recently, after the Seed of Nightmare had been conquered. The Spell made it appear, not Hope. Had the Spell created entirely new enchantments, or built upon the existing ones?</p>
<p class="chapter-paragraph">Cassie had said that there were other functions of the Citadel she had yet to master. What were they, exactly?</p>
<p class="chapter-paragraph">Now that Sunny started thinking about it, he realized that he didn't really know much about Citadels. That word just used to describe a human stronghold built around a Gateway in the Dream Realm. He had visited two â€” the Sanctuary of Noctis and the Ivory Tower. No, actually, three â€” the Crimson Spire would have become a Citadel, too, if it had not been destroyed.</p>
<p class="chapter-paragraph">Was there perhaps more to the Citadels than he had known? Did all of them have hidden functions?</p>
<p class="chapter-paragraph">Sunny glanced at Cassie, who was tracing the stone wall with her fingers as she ascended the stairs.</p>
<p class="chapter-paragraph">"I actually learned a bit about Hope's runic sorcery back in the Nightmare. If you want, we can compare notes later."</p>
<p class="chapter-paragraph">Cassie turned her head and smiled with some excitement.</p>
<p class="chapter-paragraph">"Really? That would be very helpful!"</p>
<p class="chapter-paragraph">Sunny sighed. Of course, it would be... neither of them had any hope of truly learning runic sorcery â€” or Hope's magic, as Noctis had called it â€” in their lifetime. However, learning how to decipher and use already-existing enchantments was not out of the question.</p>
<p class="chapter-paragraph">After all, a person could swing a sword without knowing how to forge it.</p>
<p class="chapter-paragraph">Runic sorcery was different from weaving, but perhaps just as ingenious. In the primordial era of the Dream Realm, mortals had only known one type of sorcery â€” the Sorcery of Names. They were capable of invoking the true names of things to wield great power, but speaking those names aloud was often an impossible task.</p>
<p class="chapter-paragraph">Hope, however, had invented the concept of writing and gifted it to humans. With the knowledge of writing, humans learned how to transcribe true names and did not need to speak them aloud anymore. More than that, the names could be bound to material objects through writing, thus granting the invocations permanence... and could also be shaped into songs and phrases.</p>
<p class="chapter-paragraph">However, it was still all based on the knowledge of true names â€” without knowing the meaning of the name, transcribing it would have no effect. And there was no way for either Sunny or Cassie to learn that in less than a few centuries.</p>
<p class="chapter-paragraph">They were both mortals, after all.</p>
<p class="chapter-paragraph">So, all they could do was use runic enchantments left behind by someone far more powerful and knowledgeable.</p>
<p class="chapter-paragraph">Sunny shook his head slightly, wondering what secrets the Ivory Tower truly held.</p>
<p class="chapter-paragraph">They made their way back to the first level, and then went higher. In the past, the Fire Keepers had made their home on the upper levels of the Ivory Tower, but now it was empty â€” the Awakened following Nephis and Cassie had moved to the wooden village outside.</p>
<p class="chapter-paragraph">The second level, the third level, the fourth... finally, they arrived at the fifth, second-to-last level of the pagoda. It was separated into many halls and chambers, some of which had been recently refurbished to serve various purposes. It all resembled the interior of a beautiful, but rather bare-bones manor.</p>
<p class="chapter-paragraph">A mouth-watering aroma was coming from a half-open door at the end of one of the corridors. Effie hurried toward it with gleaming eyes.</p>
<p class="chapter-paragraph">Behind the door was a brightly lit hall that was made into a kitchen. Sunny noticed that someone had put a lot of effort into either building cooking appliances or bringing them here from the waking world â€” the latter could only be done by a Master, of course.</p>
<p class="chapter-paragraph">Although most advanced technology did not work in the Dream Realm, similar to how it failed in the vicinity of Nightmare Gates, more primitive devices functioned perfectly well. There were expensive, but much more convenient spelltech solutions, too. So while you couldn't really have something like an electric stove or a refrigerator here, you could have a wood stove or an icebox, as well as analogs that worked on essence.</p>
<p class="chapter-paragraph">Sunny also noticed several large crates of cooking ingredients, beverages, and snacks, which had obviously been delivered from the waking world by the members of the cohort.</p>
<p class="chapter-paragraph">He did not pay that much attention, though, because there was someone standing in front of the stove, stirring the source of the delicious aroma â€” a generous amount of fried rice that was being cooked in a bowl-shaped frying pan.</p>
<p class="chapter-paragraph">Tall, slender, with beautiful silver hair, and wearing white apron... wait, an apron?</p>
<p class="chapter-paragraph">Sunny blinked a couple of times.</p>
<p class="chapter-paragraph">Hearing their steps, Nephis looked over her shoulder and called out:</p>
<p class="chapter-paragraph">"It's almost ready..."</p>
<p class="chapter-paragraph">Then, she suddenly tensed and slowly turned around.</p>
<p class="chapter-paragraph">Neph's face remained as calm as ever, but there was a hint of agitation in her striking grey eyes.</p>
<p class="chapter-paragraph">"...Sunny?"</p>
<p class="chapter-paragraph">He remained silent for a moment, then looked past her.</p>
<p class="chapter-paragraph">"Sure. You better turn around, though. Don't burn our dinner!"</p>
        </div>
        
        <div class="chapter-nav">
            <a href="1069.html" class="">â† Previous</a>
            <a href="../chapter-list.html">ğŸ“š All Chapters</a>
            <a href="1071.html" class="">Next â†’</a>
        </div>
    </div>
    
    <aside class="wiki-sidebar">
        <div class="wiki-sidebar-header">
            <h3>ğŸ“– Wiki</h3>
            <p>Spoiler-free up to current chapter</p>
        </div>
        <div class="wiki-tabs">
            <button class="wiki-tab active" data-tab="characters">ğŸ‘¤ Characters</button>
            <button class="wiki-tab" data-tab="terms">ğŸ“š Terms</button>
            <button class="wiki-tab" data-tab="locations">ğŸ—ºï¸ Places</button>
            <button class="wiki-tab" data-tab="events">âš”ï¸ Events</button>
        </div>
        <div class="wiki-content">
            <div id="characters-section" class="wiki-section active">
                <div id="characters-list"></div>
            </div>
            <div id="terms-section" class="wiki-section">
                <div id="terms-list"></div>
            </div>
            <div id="locations-section" class="wiki-section">
                <div id="locations-list"></div>
            </div>
            <div id="events-section" class="wiki-section">
                <div id="events-list"></div>
            </div>
        </div>
    </aside>
    <button class="wiki-toggle">ğŸ“–</button>
    
    </main>
    
    <div class="ai-chat-widget">
        <button class="ai-chat-button" title="AI Assistant">ğŸ¤–</button>
        <div class="ai-chat-panel">
            <div class="ai-chat-header">
                <h3>ğŸ¤– Shadow Slave Guide</h3>
                <button class="ai-chat-close">&times;</button>
            </div>
            <div class="ai-chat-messages"></div>
            <div class="ai-chat-input">
                <input type="text" placeholder="Ask about characters, terms...">
                <button>Send</button>
            </div>
        </div>
    </div>
    <div id="comment-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h3>Add Comment</h3>
                <button class="close-btn" onclick="document.getElementById('comment-modal').style.display = 'none';">&times;</button>
            </div>
            <textarea id="comment-text" placeholder="Write your comment..." style="width: 100%; min-height: 100px; padding: 0.75rem; background: var(--card-bg); border: 1px solid var(--border); color: var(--text); border-radius: var(--radius); font-family: inherit; margin-bottom: 1rem; resize: vertical;"></textarea>
            <button id="submit-comment-btn" class="btn" onclick="submitComment()">Post Comment</button>
        </div>
    </div>
    <div id="profile-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 480px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h3>ğŸ‘¤ Your Profile</h3>
                <button class="close-btn" onclick="document.getElementById('profile-modal').style.display = 'none';">&times;</button>
            </div>
            
            <!-- Profile Header -->
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <div style="position: relative; width: 100px; height: 100px; margin: 0 auto 1rem;">
                    <div id="profile-avatar" style="width: 100%; height: 100%; border-radius: 50%; background: var(--secondary); display: flex; align-items: center; justify-content: center; font-size: 2.5rem; overflow: hidden;">ğŸ‘¤</div>
                    <button id="avatar-upload-btn" onclick="document.getElementById('avatar-file-input').click()" style="position: absolute; bottom: 0; right: 0; width: 32px; height: 32px; border-radius: 50%; background: var(--primary); border: 2px solid var(--dark-bg); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; padding: 0; color: var(--dark-bg);" title="Change avatar">ğŸ“·</button>
                    <input type="file" id="avatar-file-input" accept="image/*" style="display: none;" onchange="handleAvatarUpload(event)">
                </div>
                <div id="profile-display-name" style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.25rem;"></div>
                <div id="profile-username" style="color: var(--primary); font-size: 0.95rem; margin-bottom: 0.5rem;"></div>
                <div id="profile-email" style="color: var(--text-light); font-size: 0.85rem;"></div>
            </div>
            
            <!-- Bio Section -->
            <div id="profile-bio-section" style="background: rgba(255,255,255,0.03); padding: 1rem; border-radius: var(--radius); margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <span style="font-weight: 600; font-size: 0.85rem; color: var(--text-light);">BIO</span>
                    <button id="edit-bio-btn" class="btn btn-sm" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="toggleBioEdit()">Edit</button>
                </div>
                <p id="profile-bio" style="color: var(--text); font-size: 0.9rem; line-height: 1.5; margin: 0;">No bio yet...</p>
                <div id="bio-edit-container" style="display: none;">
                    <textarea id="bio-input" placeholder="Tell us about yourself..." style="width: 100%; min-height: 80px; padding: 0.75rem; background: var(--card-bg); border: 1px solid var(--border); color: var(--text); border-radius: var(--radius); font-family: inherit; margin-bottom: 0.5rem; resize: vertical;"></textarea>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-sm" style="flex: 1;" onclick="saveBio()">Save</button>
                        <button class="btn btn-sm" style="flex: 1; background: var(--border);" onclick="toggleBioEdit()">Cancel</button>
                    </div>
                </div>
            </div>
            
            <!-- Reading Stats -->
            <div style="background: rgba(255,255,255,0.03); padding: 1rem; border-radius: var(--radius); margin-bottom: 1rem;">
                <div style="font-weight: 600; font-size: 0.85rem; color: var(--text-light); margin-bottom: 0.75rem;">ğŸ“Š READING STATS</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                    <div style="text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.03); border-radius: var(--radius);">
                        <div id="profile-chapters" style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">0</div>
                        <div style="font-size: 0.75rem; color: var(--text-light);">Chapters Read</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.03); border-radius: var(--radius);">
                        <div id="profile-last" style="font-size: 1.5rem; font-weight: 700; color: var(--secondary);">â€”</div>
                        <div style="font-size: 0.75rem; color: var(--text-light);">Last Chapter</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.03); border-radius: var(--radius);">
                        <div id="profile-progress" style="font-size: 1.5rem; font-weight: 700; color: var(--success);">0%</div>
                        <div style="font-size: 0.75rem; color: var(--text-light);">Progress</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.03); border-radius: var(--radius);">
                        <div id="profile-comments" style="font-size: 1.5rem; font-weight: 700; color: var(--warning);">0</div>
                        <div style="font-size: 0.75rem; color: var(--text-light);">Comments</div>
                    </div>
                </div>
            </div>
            
            <!-- Account Info -->
            <div style="background: rgba(255,255,255,0.03); padding: 1rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
                <div style="font-weight: 600; font-size: 0.85rem; color: var(--text-light); margin-bottom: 0.75rem;">âš™ï¸ ACCOUNT</div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.9rem;">
                    <span style="color: var(--text-light);">Provider</span>
                    <span id="profile-provider" style="color: var(--text);">Google</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                    <span style="color: var(--text-light);">Member Since</span>
                    <span id="profile-joined" style="color: var(--text);">â€”</span>
                </div>
            </div>
            
            <button class="btn" style="background: var(--accent); width: 100%;" onclick="handleLogout(); document.getElementById('profile-modal').style.display = 'none';">Sign Out</button>
        </div>
    </div>
    <div id="login-success-modal" class="modal" style="display: none;">
        <div class="modal-content" style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">âœ…</div>
            <h3 style="margin-bottom: 0.5rem;">Welcome!</h3>
            <p id="login-success-name" style="color: var(--text-light); margin-bottom: 1.5rem;"></p>
            <p style="margin-bottom: 1.5rem;">You're now signed in. You can comment on chapters and your progress will be synced.</p>
            <button class="btn" style="width: 100%;" onclick="document.getElementById('login-success-modal').style.display = 'none';">Continue Reading</button>
        </div>
    </div>
    <div id="popup-blocked-modal" class="modal" style="display: none;">
        <div class="modal-content" style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸªŸ</div>
            <h3 style="margin-bottom: 0.5rem;">Sign-in couldnâ€™t start</h3>
            <p style="color: var(--text-light); margin-bottom: 1.25rem;">
                If your browser blocked the sign-in popup, allow popups for this site and try again.
            </p>
            <button class="btn" style="width: 100%;" onclick="document.getElementById('popup-blocked-modal').style.display = 'none';">OK</button>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script src="../js/main.js"></script>
</body>
</html>