<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 2539 Urban Fantasy - Shadow Slave</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <nav>
            <a href="../index.html" class="logo">ğŸ“– Shadow Slave</a>
            <div class="nav-links">
                <a href="../chapter-list.html">ğŸ“š Chapters</a>
                <a href="../login.html">ğŸ’¾ Save</a>
                <a href="https://www.webnovel.com/book/shadow-slave_17505878106372705" target="_blank" rel="noopener">ğŸ”— Official Webnovel</a>
                <div id="auth-container" style="display: flex; align-items: center; gap: 0.5rem;">
                    <button id="login-btn" class="btn btn-sm" style="background: var(--secondary);" onclick="handleLogin()">Sign In</button>
                    <button id="profile-btn" class="btn btn-sm" style="background: var(--primary); display: none;" onclick="showProfile()">ğŸ‘¤ Profile</button>
                    <button id="logout-btn" class="btn btn-sm" style="background: var(--accent); display: none;" onclick="handleLogout()">Sign Out</button>
                </div>
            </div>
        </nav>
    </header>
    <main class="with-sidebar">
        
    <div class="chapter-container">
        <div class="chapter-header">
            <h1>Chapter 2539 Urban Fantasy</h1>
            <div class="chapter-meta">
                Chapter 2539 of 2720 â€¢ 1,015 words â€¢ 4 min read
            </div>
            <div class="tts-controls" data-tts>
                <button class="tts-btn tts-play" type="button">ğŸ”Š Play</button>
                <button class="tts-btn tts-pause" type="button">â¸ Pause</button>
                <button class="tts-btn tts-resume" type="button">â–¶ Resume</button>
                <button class="tts-btn tts-stop" type="button">â¹ Stop</button>
                <span class="tts-rate-label">Speed
                    <select class="tts-rate">
                        <option value="0.85">0.85Ã—</option>
                        <option value="1" selected>1Ã—</option>
                        <option value="1.15">1.15Ã—</option>
                        <option value="1.3">1.3Ã—</option>
                    </select>
                </span>
                <span class="tts-unsupported" style="display:none;">(TTS not supported in this browser)</span>
            </div>
        </div>
        
        <div class="chapter-content" data-chapter="2539">
            <p class="chapter-paragraph">"How is it?"</p>
<p class="chapter-paragraph">Sunny quietly retreated and glanced at his companions with a grim expression. He did not have anything reassuring to say. "Basically... It's a death trap."</p>
<p class="chapter-paragraph">The throne room of Mirage Castle was almost as grand and enormous as that of Bastion. The domed ceiling was tremendously high, and there were arched galleries running the length of the great hall halfway to the floor.</p>
<p class="chapter-paragraph">Since Sunny, Effie, Morgan, and the Other Mordret had entered the main keep from the aerial bridge, they arrived at a hidden entrance to one of the galleries as opposed to the towering gates leading to the main floor of the throne room.</p>
<p class="chapter-paragraph">Sunny had entered the gallery stealthily and eliminated the mercenaries perched there without making any noise. That allowed him to take a peek at what was happening below.</p>
<p class="chapter-paragraph">It seemed like Madoc's forces were preparing to make a last stand under the throne of Mirage. There were staggered rows of barricades and countless armed henchmen hiding behind them, ready to open fire at the gate the moment someone tried to open it. Worse still, there was too much space between the gate and the barricades â€” the throne room was just that vast.</p>
<p class="chapter-paragraph">It was a killing field.</p>
<p class="chapter-paragraph">Sunny scowled, unsure what to do. Even if they flanked the enemies by opening fire from the gallery, the sheer number of mercenaries would make it hard for anyone to survive the squall of bullets â€” worse than that, some of them seemed to be armed with automatic rifles and submachine guns instead of the semi-automatic pistols the previous ones had wielded.</p>
<p class="chapter-paragraph">At this point, Sunny would not be surprised to learn that the enemy even had a crate of grenades or two stashed somewhere in the throne room. Or a rocket launcher... rocket launchers were a thing, right?</p>
<p class="chapter-paragraph">He vaguely remembered something like that from the Devil Detective's memories.</p>
<p class="chapter-paragraph">Sunny was a bit stunned.</p>
<p class="chapter-paragraph">â€˜How come these private security goons are armed so much better than the police?â€™ Then again, Legacies were always better equipped than the government Awakened, too.</p>
<p class="chapter-paragraph">More importantly, how was he going to deal with this thoroughly entrenched, heavily armed force?</p>
<p class="chapter-paragraph">There were sporadic sounds of gunfire, screams, and muffled booms reaching the throne room through the closed gate, coming closer and closer. The castle quaked from time to time, and dust poured from the ceiling...</p>
<p class="chapter-paragraph">Saint was drawing near.</p>
<p class="chapter-paragraph">Sunny, Effie, and Morgan were going to have to act when she arrived, no matter whether they had a plan or not.</p>
<p class="chapter-paragraph">He studied his companions for a moment, and then said in a grim tone:</p>
<p class="chapter-paragraph">â€œListen. Here is the..."</p>
<p class="chapter-paragraph">But then, Sunny fell silent.</p>
<p class="chapter-paragraph">That was because something had changed. The sounds of gunfire, screams, and muffled booms stopped abruptly, and the throne room was suddenly enveloped in eerie silence.</p>
<p class="chapter-paragraph">The mercenaries below shifted nervously, aiming their guns at the gate.</p>
<p class="chapter-paragraph">Sunny cursed and moved toward the parapet of the gallery, feeling that something was going to happen once the silence was broken.</p>
<p class="chapter-paragraph">And it did.</p>
<p class="chapter-paragraph">â€˜What...â€™</p>
<p class="chapter-paragraph">The towering gates did not open, and neither were they broken down. Instead, they simply disintegrated, consumed by a great flood of darkness. As the crushing black torrent rushed into the throne room, Sunny thought that the Castle was drowned by the lake, somehow â€” however, a moment later, he realized that the flood had nothing to do with water.</p>
<p class="chapter-paragraph">It was a vast river of true darkness.</p>
<p class="chapter-paragraph">The swirling mass of darkness moved as if it possessed a mind of its own, splitting into countless streams as it crushed into the floor of the throne room. Flooding the killing field like a surging wave, it washed over the barricades and swallowed them.</p>
<p class="chapter-paragraph">A moment later, horrified screams and sounds of gunfire filled the grand hall. The muzzle flashes bloomed in the embrace of true darkness, only to be suffocated the next moment. A graceful figure moved under the cover of the dark flood, wading through the gunfire to silence the voices of the terrified mercenaries one after another.</p>
<p class="chapter-paragraph">Sunny shook off his trance and raised his gun.</p>
<p class="chapter-paragraph">â€œWhat are you waiting for? Shoot them!"</p>
<p class="chapter-paragraph">He opened fire first, aiming at the henchmen that were the furthest away from the raging flood of true darkness. A heartbeat later, Effie and Morgan joined him, using their elevated position to pick off the mercenaries with deadly precision. Mordret stood just a step away, watching the terrifying spectacle of Saint conquering the throne room of Mirage Castle with wide eyes.</p>
<p class="chapter-paragraph">"Detective, tâ€”that..."</p>
<p class="chapter-paragraph">He stammered for a moment, and then finished his sentence in a hesitant tone:</p>
<p class="chapter-paragraph">".is the wrong genre, I think?"</p>
<p class="chapter-paragraph">Sunny barely heard his question through the cannonade.</p>
<p class="chapter-paragraph">â€œWhat... the hell are you talking about?! Snap out of it and take cover, damn it!"</p>
<p class="chapter-paragraph">The Other Mordret flinched and belatedly ducked down.</p>
<p class="chapter-paragraph">"Apologies!"</p>
<p class="chapter-paragraph">Ejecting a spent magazine, Sunny reached for a new one and discovered that he had run out of ammunition. Cursing quietly, he threw the gun away and unholstered his revolver, which still had a single bullet left. He did not get the opportunity to use it, though...</p>
<p class="chapter-paragraph">Because by then, the slaughter was over. The throne room grew quiet once again. The scream stopped, and the sounds of gunfire stopped, as well.</p>
<p class="chapter-paragraph">The river of darkness swirled and retreated, being absorbed into Saint's body.</p>
<p class="chapter-paragraph">Standing among the corpses, she glanced up and cast her indifferent gaze at the throne of Mirage.</p>
<p class="chapter-paragraph">Her face was covered in soot and blood, seeming too gorgeous to belong to a human... in fact, at that moment, her inhuman gorgeousness was eerie and haunting.</p>
<p class="chapter-paragraph">Just then, the silence was suddenly broken by the sound of applause.</p>
<p class="chapter-paragraph">Looking over to the gallery on the opposite side of the throne room, Sunny saw Mordret.</p>
<p class="chapter-paragraph">The Prince of Nothing was leaning against an arch, clapping his hands as he looked down with an amused expression. â€œWonderfully done, Dr. Saint! Truly remarkable. I'm in awe.â€™</p>
<p class="chapter-paragraph">Then, he looked in Sunny's direction and smiled.</p>
<p class="chapter-paragraph">â€œOh, by the way. Has anyone seen my uncle?"</p>
        </div>
        
        <div class="chapter-nav">
            <a href="2538.html" class="">â† Previous</a>
            <a href="../chapter-list.html">ğŸ“š All Chapters</a>
            <a href="2540.html" class="">Next â†’</a>
        </div>
    </div>
    
    <aside class="wiki-sidebar">
        <div class="wiki-sidebar-header">
            <h3>ğŸ“– Wiki</h3>
            <p>Spoiler-free up to current chapter</p>
        </div>
        <div class="wiki-tabs">
            <button class="wiki-tab active" data-tab="characters">ğŸ‘¤ Characters</button>
            <button class="wiki-tab" data-tab="terms">ğŸ“š Terms</button>
            <button class="wiki-tab" data-tab="locations">ğŸ—ºï¸ Places</button>
            <button class="wiki-tab" data-tab="events">âš”ï¸ Events</button>
        </div>
        <div class="wiki-content">
            <div id="characters-section" class="wiki-section active">
                <div id="characters-list"></div>
            </div>
            <div id="terms-section" class="wiki-section">
                <div id="terms-list"></div>
            </div>
            <div id="locations-section" class="wiki-section">
                <div id="locations-list"></div>
            </div>
            <div id="events-section" class="wiki-section">
                <div id="events-list"></div>
            </div>
        </div>
    </aside>
    <button class="wiki-toggle">ğŸ“–</button>
    
    </main>
    
    <div class="ai-chat-widget">
        <button class="ai-chat-button" title="AI Assistant">ğŸ¤–</button>
        <div class="ai-chat-panel">
            <div class="ai-chat-header">
                <h3>ğŸ¤– Shadow Slave Guide</h3>
                <button class="ai-chat-close">&times;</button>
            </div>
            <div class="ai-chat-messages"></div>
            <div class="ai-chat-input">
                <input type="text" placeholder="Ask about characters, terms...">
                <button>Send</button>
            </div>
        </div>
    </div>
    <div id="comment-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h3>Add Comment</h3>
                <button class="close-btn" onclick="document.getElementById('comment-modal').style.display = 'none';">&times;</button>
            </div>
            <textarea id="comment-text" placeholder="Write your comment..." style="width: 100%; min-height: 100px; padding: 0.75rem; background: var(--card-bg); border: 1px solid var(--border); color: var(--text); border-radius: var(--radius); font-family: inherit; margin-bottom: 1rem; resize: vertical;"></textarea>
            <button id="submit-comment-btn" class="btn" onclick="submitComment()">Post Comment</button>
        </div>
    </div>
    <div id="profile-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 480px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h3>ğŸ‘¤ Your Profile</h3>
                <button class="close-btn" onclick="document.getElementById('profile-modal').style.display = 'none';">&times;</button>
            </div>
            
            <!-- Profile Header -->
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <div style="position: relative; width: 100px; height: 100px; margin: 0 auto 1rem;">
                    <div id="profile-avatar" style="width: 100%; height: 100%; border-radius: 50%; background: var(--secondary); display: flex; align-items: center; justify-content: center; font-size: 2.5rem; overflow: hidden;">ğŸ‘¤</div>
                    <button id="avatar-upload-btn" onclick="document.getElementById('avatar-file-input').click()" style="position: absolute; bottom: 0; right: 0; width: 32px; height: 32px; border-radius: 50%; background: var(--primary); border: 2px solid var(--dark-bg); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; padding: 0; color: var(--dark-bg);" title="Change avatar">ğŸ“·</button>
                    <input type="file" id="avatar-file-input" accept="image/*" style="display: none;" onchange="handleAvatarUpload(event)">
                </div>
                <div id="profile-display-name" style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.25rem;"></div>
                <div id="profile-username" style="color: var(--primary); font-size: 0.95rem; margin-bottom: 0.5rem;"></div>
                <div id="profile-email" style="color: var(--text-light); font-size: 0.85rem;"></div>
            </div>
            
            <!-- Bio Section -->
            <div id="profile-bio-section" style="background: rgba(255,255,255,0.03); padding: 1rem; border-radius: var(--radius); margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <span style="font-weight: 600; font-size: 0.85rem; color: var(--text-light);">BIO</span>
                    <button id="edit-bio-btn" class="btn btn-sm" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="toggleBioEdit()">Edit</button>
                </div>
                <p id="profile-bio" style="color: var(--text); font-size: 0.9rem; line-height: 1.5; margin: 0;">No bio yet...</p>
                <div id="bio-edit-container" style="display: none;">
                    <textarea id="bio-input" placeholder="Tell us about yourself..." style="width: 100%; min-height: 80px; padding: 0.75rem; background: var(--card-bg); border: 1px solid var(--border); color: var(--text); border-radius: var(--radius); font-family: inherit; margin-bottom: 0.5rem; resize: vertical;"></textarea>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-sm" style="flex: 1;" onclick="saveBio()">Save</button>
                        <button class="btn btn-sm" style="flex: 1; background: var(--border);" onclick="toggleBioEdit()">Cancel</button>
                    </div>
                </div>
            </div>
            
            <!-- Reading Stats -->
            <div style="background: rgba(255,255,255,0.03); padding: 1rem; border-radius: var(--radius); margin-bottom: 1rem;">
                <div style="font-weight: 600; font-size: 0.85rem; color: var(--text-light); margin-bottom: 0.75rem;">ğŸ“Š READING STATS</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                    <div style="text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.03); border-radius: var(--radius);">
                        <div id="profile-chapters" style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">0</div>
                        <div style="font-size: 0.75rem; color: var(--text-light);">Chapters Read</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.03); border-radius: var(--radius);">
                        <div id="profile-last" style="font-size: 1.5rem; font-weight: 700; color: var(--secondary);">â€”</div>
                        <div style="font-size: 0.75rem; color: var(--text-light);">Last Chapter</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.03); border-radius: var(--radius);">
                        <div id="profile-progress" style="font-size: 1.5rem; font-weight: 700; color: var(--success);">0%</div>
                        <div style="font-size: 0.75rem; color: var(--text-light);">Progress</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.03); border-radius: var(--radius);">
                        <div id="profile-comments" style="font-size: 1.5rem; font-weight: 700; color: var(--warning);">0</div>
                        <div style="font-size: 0.75rem; color: var(--text-light);">Comments</div>
                    </div>
                </div>
            </div>
            
            <!-- Account Info -->
            <div style="background: rgba(255,255,255,0.03); padding: 1rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
                <div style="font-weight: 600; font-size: 0.85rem; color: var(--text-light); margin-bottom: 0.75rem;">âš™ï¸ ACCOUNT</div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.9rem;">
                    <span style="color: var(--text-light);">Provider</span>
                    <span id="profile-provider" style="color: var(--text);">Google</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                    <span style="color: var(--text-light);">Member Since</span>
                    <span id="profile-joined" style="color: var(--text);">â€”</span>
                </div>
            </div>
            
            <button class="btn" style="background: var(--accent); width: 100%;" onclick="handleLogout(); document.getElementById('profile-modal').style.display = 'none';">Sign Out</button>
        </div>
    </div>
    <div id="login-success-modal" class="modal" style="display: none;">
        <div class="modal-content" style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">âœ…</div>
            <h3 style="margin-bottom: 0.5rem;">Welcome!</h3>
            <p id="login-success-name" style="color: var(--text-light); margin-bottom: 1.5rem;"></p>
            <p style="margin-bottom: 1.5rem;">You're now signed in. You can comment on chapters and your progress will be synced.</p>
            <button class="btn" style="width: 100%;" onclick="document.getElementById('login-success-modal').style.display = 'none';">Continue Reading</button>
        </div>
    </div>
    <div id="popup-blocked-modal" class="modal" style="display: none;">
        <div class="modal-content" style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸªŸ</div>
            <h3 style="margin-bottom: 0.5rem;">Sign-in couldnâ€™t start</h3>
            <p style="color: var(--text-light); margin-bottom: 1.25rem;">
                If your browser blocked the sign-in popup, allow popups for this site and try again.
            </p>
            <button class="btn" style="width: 100%;" onclick="document.getElementById('popup-blocked-modal').style.display = 'none';">OK</button>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script src="../js/main.js"></script>
</body>
</html>